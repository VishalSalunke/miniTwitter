(this.webpackJsonptwitter_client=this.webpackJsonptwitter_client||[]).push([[0],{110:function(e,t,a){e.exports=a(168)},115:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),l=a.n(r),s=(a(115),a(27)),i=a(35),c=a(17),u=a(12),m=a(19),d=a(20),p=a(21),h=a(15),f=a(11),g=a(169),E=a(211),b=a(205),v=a(4),O=a(13),w=a.n(O),y=function(){return function(e){e(j),w.a.get("http://localhost:5000/api/posts").then((function(t){return e({type:"GET_POSTS",payload:t.data})})).catch((function(e){return console.log(e)}))}},j=function(){return{type:"LOADING_POSTS"}},C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.hadleSunmit=function(e){e.preventDefault();var t={text:a.state.text};a.props.addPost(t),a.setState({text:""})},a.state={text:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(g.a,{className:e.paper},o.a.createElement(E.a,{name:"text",className:e.textField,multiline:!0,rowsMax:"4",label:"what's happening??",onChange:this.handleChange,value:this.state.text}),o.a.createElement(b.a,{variant:"outlined",className:e.Button,onClick:this.hadleSunmit},"tweet"))}}]),t}(o.a.Component),S=Object(h.b)(null,{addPost:function(e){return function(t){w.a.post("http://localhost:5000/api/posts/add",e).then((function(e){return t({type:"ADD_POST",payload:e.data})})).catch((function(e){return console.log(e)}))}}})(Object(v.a)({paper:{padding:8},textField:{width:"100%"},Button:{width:"100%",marginTop:20,marginBottom:10,backgroundColor:"#800080",color:"#fff","&:hover":{color:"#800080"}}})(C)),P=a(96),T=a.n(P),k=a(93),x=a.n(k),N=a(92),B=a.n(N),_=a(94),F=a.n(_),L=a(95),A=a.n(L),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.hadleSubmit=function(e){e.preventDefault();var t={comment:a.state.newComment,id:a.props.post._id};a.props.addComment(t),a.setState({addComment:!a.state.addComment,showComments:!0}),a.props.postRefresh()},a.deletePost=function(e){a.props.deletePost(e),console.log("deletePost post id ".concat(e)),a.props.postRefresh()},a.state={showComments:!1,addComment:!1,newComment:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.post,r=t.user,l=this.state,i=l.addComment,c=l.showComments,u=n.comments;return o.a.createElement(g.a,{className:a.paper},o.a.createElement("div",{className:a.avatar,style:{backgroundColor:"#".concat(n.user.id.slice(n.user.id.length-3))}}),o.a.createElement("div",null,o.a.createElement("h3",{className:a.username},o.a.createElement(s.b,{to:"/profile/".concat(n.user.id)},n.user.username),o.a.createElement("span",{className:a.time}," ",new Date(n.createdAt).toLocaleString()),n.user.id===r._id?o.a.createElement(B.a,{style:{cursor:"pointer",paddingLeft:"10px"},fontSize:"small",onClick:function(){e.deletePost(n._id)}}):console.log("hi")),n.text,o.a.createElement("div",{className:a.commentParentBox},o.a.createElement(x.a,{style:{cursor:"pointer",marginTop:8},onClick:function(){e.setState({addComment:!i})}}),o.a.createElement("div",{className:a.commentsLable,onClick:function(){if(!u)return!1;e.setState({showComments:!c})}},"comments ",o.a.createElement("span",null,this.state.showComments?o.a.createElement(F.a,{fontSize:"small"}):o.a.createElement(A.a,{fontSize:"small"})))),this.state.addComment&&o.a.createElement("div",null,o.a.createElement(E.a,{name:"newComment",className:a.textField,multiline:!0,rowsMax:"4",label:"Add comment",onChange:this.handleChange,value:this.state.comment}),o.a.createElement(b.a,{variant:"outlined",className:a.Button,onClick:this.hadleSubmit},"post comment")),this.state.showComments&&u&&u.map((function(e){var t=Math.random();return o.a.createElement(g.a,{key:"".concat(e.user.email,"-").concat(t),className:a.commentBox},o.a.createElement("div",{className:a.comment},o.a.createElement("div",null,o.a.createElement(T.a,{style:{marginTop:8}}),o.a.createElement("span",{style:{fontWeight:"bold",marginLeft:5,color:"chocolate",fontFamily:"Lobster"}}," ",e.user.username)),o.a.createElement("div",{style:{marginTop:5,fontFamily:"Verdana, Geneva, sans-serif",fontStyle:"italic",marginLeft:10}},"  ",e.comment," ")))}))))}}]),t}(o.a.Component),U=Object(h.b)((function(e){return{comment:e.post.comments,user:e.auth.user}}),{addComment:function(e){return function(t){w.a.post("http://localhost:5000/api/posts/insertcomment",e).then((function(e){return t({type:"ADD_COMMENT",payload:e.data})})).catch((function(e){return console.log(e)}))}},getPosts:y,deletePost:function(e){return function(t){console.log(" deleting post in action with id ".concat(e));w.a.delete("http://localhost:5000/api/posts/delete/".concat(e)).then((function(e){return t({type:"DELETE_POST",payload:e.data})})).catch((function(e){return console.log(e)}))}}})(Object(v.a)({paper:{padding:10,display:"flex",marginBottom:5},avatar:{minWidth:10,margin:"4px 10px 4px 4px"},username:{marginBottom:5},time:{marginLeft:10,color:"#bbb",fontSize:14},Button:{width:"100%",marginTop:20,marginBottom:10,backgroundColor:"#4B0082",color:"#fff","&:hover":{color:"#800080"}},commentParentBox:{display:"flex",marginTop:5},commentsLable:{fontSize:13,cursor:"pointer",fontFamily:'Times New Roman", Times, serif',fontStyle:"italic",color:"#8000ff",margin:10,marginTop:1},commentBox:{padding:7,display:"flex",flexWrap:"wrap"},comment:{flex:"0 0 100%",marginTop:2,marginBottom:5},textField:{width:"100%"}})(R)),D=a(206),I=Object(v.a)({load:{textAlign:"center",marginTop:25,width:"100%"},loadIcon:{color:"#8A2BE2"}})((function(e){var t=e.classes;return o.a.createElement("div",{className:t.load},o.a.createElement(D.a,{className:t.loadIcon}))})),G=a(214),M=a(213),W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleSwitch=function(e){a.setState({allPosts:!a.state.allPosts})},a.refreshPosts=function(){a.props.getPosts(),a.setState({refreshPosts:!a.state.refreshPosts})},a.state={allPosts:!0,refreshPosts:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.allPosts!==this.state.allPosts&&(this.state.allPosts?this.props.getPosts():this.props.getPostByFollowingUsers())}},{key:"componentDidMount",value:function(){this.props.getPosts()}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.loading,r=this.state.allPosts,l=a&&a.map((function(t){return o.a.createElement(U,{key:t._id,post:t,postRefresh:e.refreshPosts})}));return o.a.createElement("div",null,o.a.createElement(S,null),o.a.createElement(M.a,{control:o.a.createElement(G.a,{checked:r,onClick:this.handleSwitch}),label:r?"All posts":"Posts from following users",style:this.state.refreshPosts?{color:"black"}:{color:"red"}}),n?o.a.createElement(I,null):l)}}]),t}(o.a.Component),z=Object(h.b)((function(e){return{list:e.post.list,loading:e.post.loading}}),{getPosts:y,getPostByFollowingUsers:function(){return function(e){w.a.get("http://localhost:5000/api/posts/following").then((function(t){return e({type:"GET_POSTS",payload:t.data})})).catch((function(e){return console.log(e)}))}}})(W),V=function(e){w.a.defaults.headers.common.Authorization=e?"Bearer "+e:null},J=function(){return function(e){w.a.get("http://localhost:5000/api/users").then((function(t){e(X(t.data))}))}},X=function(e){return{type:"SET_CURRENT_USER",payload:e}},H=function(){return function(e){localStorage.removeItem("jwtToken"),V(),e(X())}},$=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};a.props.loginUser(t)},a.state={email:"",password:"",errors:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors}),e.auth.isAuthenticated&&(console.log("set history"),this.props.history.push("/"))}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.props.classes,t=this.state.errors;return o.a.createElement(g.a,{style:{padding:15}},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement(E.a,{name:"email",type:"email",label:"Email",className:e.textFields,value:this.state.email,onChange:this.handleChange,helperText:t.email?t.email:"",error:!!t.email}),o.a.createElement(E.a,{name:"password",type:"password",label:"Password",className:e.textFields,value:this.state.password,onChange:this.handleChange,helperText:t.password?t.password:"",error:!!t.password}),o.a.createElement("div",{className:e.buttonBlock},o.a.createElement(b.a,{variant:"outlined",type:"submit"},"Submit"))))}}]),t}(n.Component),q=Object(h.b)((function(e){return{errors:e.errors,auth:e.auth}}),{loginUser:function(e){return function(t){w.a.post("http://localhost:5000/api/users/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),V(a),t(J())})).catch((function(e){t({type:"GET_ERRORS",payload:e.response.data})}))}}})(Object(i.f)(Object(v.a)({textFields:{width:"100%",marginBottom:5},buttonBlock:{textAlign:"center",marginBottom:10,marginTop:15}})($))),K=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.isAuthenticated;return o.a.createElement("div",null,e?o.a.createElement(z,null):o.a.createElement(q,null))}}]),t}(o.a.Component),Q=Object(h.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))(K),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password,username:a.state.username,password2:a.state.password2};a.props.registerUser(t,a.props.history)},a.state={email:"",password:"",password2:"",username:"",errors:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.errors;return o.a.createElement(g.a,{style:{padding:15}},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement(E.a,{name:"email",type:"email",label:"Email",className:e.textFields,value:this.state.email,onChange:this.handleChange,helperText:t.email?t.email:"",error:!!t.email}),o.a.createElement(E.a,{name:"username",type:"txet",label:"username",className:e.textFields,value:this.state.username,onChange:this.handleChange,helperText:t.username?t.username:"",error:!!t.username}),o.a.createElement(E.a,{name:"password",type:"password",label:"Password",className:e.textFields,value:this.state.password,onChange:this.handleChange,helperText:t.password?t.password:"",error:!!t.password}),o.a.createElement(E.a,{name:"password2",type:"password",label:"Repeat Password",className:e.textFields,value:this.state.password2,onChange:this.handleChange,helperText:t.password2?t.password2:"",error:!!t.password2}),o.a.createElement("div",{className:e.buttonBlock},o.a.createElement(b.a,{variant:"outlined",type:"submit"},"Submit"))))}}]),t}(n.Component),Z=Object(h.b)((function(e){return{errors:e.errors}}),{registerUser:function(e,t){return function(a){w.a.post("http://localhost:5000/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:"GET_ERRORS",payload:e.response.data})}))}}})(Object(i.f)(Object(v.a)({textFields:{width:"100%",marginBottom:5},buttonBlock:{textAlign:"center",marginBottom:10,marginTop:15}})(Y))),ee=a(210),te=a(208),ae=a(209),ne=a(207),oe=a(102),re=a(212),le=a(98),se=a.n(le),ie=a(97),ce=a.n(ie),ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(e){a.setState({anchorEl:null})},a.handleLogout=function(){a.setState({anchorEl:null}),a.props.logoutUser(),a.props.history&&a.props.history.push("/login")},a.state={anchorEl:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthenticated,n=e.user,r=this.state.anchorEl,l=Boolean(r),i=o.a.createElement("div",null,o.a.createElement(ne.a,{"aria-owns":l?"menu":void 0,"aria-haspopup":"true",color:"inherit",onClick:this.handleMenu},o.a.createElement(ce.a,null)),o.a.createElement(oe.a,{id:"menu",open:l,anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleClose},o.a.createElement(re.a,{onClick:this.handleClose},o.a.createElement(s.b,{to:"/login"}," Login ")),o.a.createElement(re.a,{onClick:this.handleClose},o.a.createElement(s.b,{to:"/register"}," Register")))),c=a&&o.a.createElement("div",null,o.a.createElement(ne.a,{"aria-owns":l?"menu":void 0,"aria-haspopup":"true",color:"inherit",onClick:this.handleMenu},o.a.createElement(se.a,null)),"Hello",o.a.createElement("span",{style:{fontStyle:"italic"}},"  ",n.username),o.a.createElement(oe.a,{id:"menu",open:l,anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleClose},o.a.createElement(re.a,{onClick:this.handleClose},o.a.createElement(s.b,{to:"/profile/".concat(n._id)},"Profile ")),o.a.createElement(re.a,{onClick:this.handleLogout}," Logout ")));return o.a.createElement("div",{className:t.root},o.a.createElement(te.a,{position:"static",style:{backgroundColor:"#4B0082"}},o.a.createElement(ae.a,{className:t.space},o.a.createElement(s.b,{to:"/",className:t.logo}," Twitter "),a?c:i)))}}]),t}(o.a.Component),me=Object(h.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{logoutUser:H})(Object(v.a)({root:{flexGrow:1},logo:{color:"#fff",fontSize:30},space:{justifyContent:"space-between"}})(ue)),de=a(99),pe=a.n(de),he=Object(v.a)({root:{textAlign:"center",marginTop:20}})((function(e){var t=e.classes;return o.a.createElement("div",{className:t.root},o.a.createElement(pe.a,{by:"Vishal Salunke",emoji:!0,link:"https://vishalsalunke.github.io/Myportfolio"}))})),fe=function(e){var t=e.children;return o.a.createElement("div",null,o.a.createElement(me,null),o.a.createElement(ee.a,{container:!0,justify:"center"},o.a.createElement(ee.a,{item:!0,xs:12,sm:6,style:{marginTop:30}},t)),o.a.createElement(he,null))},ge=function(){return{type:"LOADING_POSTS"}},Ee=function(){return{type:"LOAD_PROFILE"}},be=Object(h.b)((function(e){return{loadingPosts:e.post.loading,list:e.post.list,profile:e.profile.user,loadingProfile:e.profile.loading,auth:e.auth,user:e.auth.user}}),{getPostByUSer:function(e){return function(t){t(ge()),w.a.get("http://localhost:5000/api/posts/".concat(e)).then((function(e){return t({type:"GET_POSTS",payload:e.data})})).catch((function(e){return console.log(e)}))}},getUserProfile:function(e){return function(t){t(Ee()),w.a.get("http://localhost:5000/api/users/".concat(e)).then((function(e){return t({type:"GET_PROFILE",payload:e.data})})).catch((function(e){return console.log(e)}))}},followUser:function(e){return function(t){w.a.post("http://localhost:5000/api/users/follow",{userId:e}).then((function(e){t({type:"FOLLOW",payload:e.data.userId})})).catch((function(e){return console.log(e)}))}},unFollowUser:function(e){return function(t){w.a.post("http://localhost:5000/api/users/unfollow",{userId:e}).then((function(e){return t({type:"UNFOLLOW",payload:e.data.userId})})).catch((function(e){return console.log(e)}))}},refreshUserProfile:function(e){return function(t){w.a.get("http://localhost:5000/api/users/".concat(e)).then((function(e){return t({type:"GET_PROFILE",payload:e.data})})).catch((function(e){return console.log(e)}))}}})(Object(v.a)({paper:{padding:10},detailsBlock:{display:"flex"},username:{},email:{color:"#888",marginBottom:10},detail:{marginRight:5,fontWeight:"bold"},detailTitle:{marginLeft:3,textTransform:"uppercase",fontSize:11,fontWeight:"normal"},FollowBtnBlock:{width:"100%",textAlign:"right"},FollowBtn:{backgroundColor:"#9400D3",color:"white","&:hover":{color:"black",borderColor:"#9400D3"}}})((function(e){var t=e.classes,a=e.getPostByUSer,r=e.getUserProfile,l=e.loadingPosts,s=e.loadingProfile,i=e.list,c=e.auth,u=e.user,m=e.profile,d=e.match,p=e.followUser,h=e.unFollowUser,f=e.refreshUserProfile;Object(n.useEffect)((function(){a(d.params.userId),r(d.params.userId)}),[]),Object(n.useEffect)((function(){f(d.params.userId)}),[u]);var E,v,O;return c.isAuthenticated&&(E=-1===u.following.indexOf(d.params.userId)?o.a.createElement("div",{className:t.FollowBtnBlock},o.a.createElement(b.a,{className:t.FollowBtn,variant:"outlined",onClick:function(){p(d.params.userId)}}," Follow")):o.a.createElement("div",{className:t.FollowBtnBlock},o.a.createElement(b.a,{className:t.FollowBtn,variant:"outlined",onClick:function(){h(d.params.userId)}}," Unfollow"))),v=i&&i.map((function(e){return o.a.createElement(U,{key:e._id,post:e})})),m&&v&&(O=o.a.createElement(g.a,{className:t.paper},o.a.createElement("h1",{className:t.username}," ",m.username),o.a.createElement("div",{className:t.email},m.email," "),o.a.createElement("div",{className:t.detailsBlock},o.a.createElement("div",{className:t.detail},v.length,o.a.createElement("span",{className:t.detailTitle},"posts")),o.a.createElement("div",{className:t.detail},m.followers.length,o.a.createElement("span",{className:t.detailTitle},"followers")),o.a.createElement("div",{className:t.detail},m.following.length,o.a.createElement("span",{className:t.detailTitle},"following")),E))),o.a.createElement("div",null,s?o.a.createElement("div",null,"Loading profiles"):O,l?o.a.createElement(I,null):v)}))),ve=function(){return o.a.createElement("div",null," Page not Found ")},Oe=a(33),we=a(100),ye={},je=a(25),Ce=a(18),Se={isAuthenticated:!1,user:null},Pe={list:null,loading:!1,deletedPosts:null},Te={loading:!1,user:null},ke=Object(Oe.c)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(Ce.a)({},e,{isAuthenticated:!!t.payload&&0!==Object.keys(t.payload).length,user:t.payload});case"FOLLOW":return Object(Ce.a)({},e,{user:Object(Ce.a)({},e.user,{following:[].concat(Object(je.a)(e.user.following),[t.payload])})});case"UNFOLLOW":return Object(Ce.a)({},e,{user:Object(Ce.a)({},e.user,{following:e.user.following.filter((function(e){return e!==t.payload}))})});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":return Object(Ce.a)({},e,{list:[t.payload].concat(Object(je.a)(e.list))});case"LOADING_POSTS":return Object(Ce.a)({},e,{loading:t.payload});case"GET_POSTS":return Object(Ce.a)({},e,{loading:!1,list:t.payload});case"ADD_COMMENT":return Object(Ce.a)({},e,{comments:t.payload});case"DELETE_POST":return Object(Ce.a)({},e,{deletedPosts:t.payload});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PROFILE":return Object(Ce.a)({},e,{loading:!0});case"GET_PROFILE":return Object(Ce.a)({},e,{loading:!1,user:t.payload});default:return e}}}),xe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Oe.d,Ne=Object(Oe.e)(ke,xe(Object(Oe.a)(we.a))),Be=a(101),_e=a.n(Be);localStorage.getItem("jwtToken")&&(Date.now()/1e3>_e()(localStorage.getItem("jwtToken")).exp?Ne.dispatch(H()):(V(localStorage.getItem("jwtToken")),Ne.dispatch(J())));var Fe=function(){return o.a.createElement(h.a,{store:Ne},o.a.createElement("div",null,o.a.createElement(s.a,null,o.a.createElement(fe,null,o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/",component:Q}),o.a.createElement(i.a,{path:"/login",component:q}),o.a.createElement(i.a,{path:"/register",component:Z}),o.a.createElement(i.a,{path:"/profile/:userId",component:be}),o.a.createElement(i.a,{component:ve}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(Fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[110,1,2]]]);
//# sourceMappingURL=main.a5ce0e40.chunk.js.map